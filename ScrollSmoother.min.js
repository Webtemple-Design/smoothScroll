/*!
 * ScrollSmoother 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
let gsap,_coreInitted,_win,_doc,_docEl,_body,_root,_toArray,_clamp,ScrollTrigger,_mainInstance,_expo,_getVelocityProp,_inputObserver,_context,_onResizeDelayedCall,_windowExists=()=>"undefined"!=typeof window,_getGSAP=()=>gsap||_windowExists()&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap,_bonusValidated=1,_round=e=>Math.round(1e5*e)/1e5||0,_maxScroll=e=>ScrollTrigger.maxScroll(e||_win),_autoDistance=(e,t)=>{let r,o,s=e.parentNode||_docEl,i=e.getBoundingClientRect(),l=s.getBoundingClientRect(),n=l.top-i.top,a=l.bottom-i.bottom,c=(Math.abs(n)>Math.abs(a)?n:a)/(1-t),g=-c*t;return c>0&&(r=l.height/(_win.innerHeight+l.height),o=.5===r?2*l.height:2*Math.min(l.height,Math.abs(-c*r/(2*r-1)))*(t||1),g+=t?-o*t:-o/2,c+=o),{change:c,offset:g}},_wrap=e=>{let t=_doc.querySelector(".ScrollSmoother-wrapper");return t||(t=_doc.createElement("div"),t.classList.add("ScrollSmoother-wrapper"),e.parentNode.insertBefore(t,e),t.appendChild(e)),t};export default class ScrollSmoother{constructor(e){_coreInitted||ScrollSmoother.register(gsap)||console.warn("Please gsap.registerPlugin(ScrollSmoother)"),e=this.vars=e||{},_mainInstance&&_mainInstance.kill(),_mainInstance=this,_context(this);let t,r,o,s,i,l,n,a,c,g,d,p,h,f,_,u,{smoothTouch:m,onUpdate:S,onStop:y,smooth:v,onFocusIn:T,normalizeScroll:w,wholePixels:b}=e,x=this,E=e.effectsPrefix||"",C=ScrollTrigger.getScrollFunc(_win),P=1===ScrollTrigger.isTouch?!0===m?.8:parseFloat(m)||0:0===v||!1===v?0:parseFloat(v)||.8,A=P&&+e.speed||1,R=0,I=0,k=1,z=_getVelocityProp(0),N=()=>z.update(-R),M={y:0},F=()=>t.style.overflow="visible",B=e=>{e.update();let t=e.getTween();t&&(t.pause(),t._time=t._dur,t._tTime=t._tDur),_=!1,e.animation.progress(e.progress,!0)},D=(e,r)=>{(e!==R&&!g||r)&&(b&&(e=Math.round(e)),P&&(t.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+e+", 0, 1)",t._gsap.y=e+"px"),I=e-R,R=e,ScrollTrigger.isUpdating||ScrollSmoother.isRefreshing||ScrollTrigger.update())},H=function(e){return arguments.length?(e<0&&(e=0),M.y=-e,_=!0,g?R=-e:D(-e),ScrollTrigger.isRefreshing?s.update():C(e/A),this):-R},O="undefined"!=typeof ResizeObserver&&!1!==e.autoResize&&new ResizeObserver((()=>{if(!ScrollTrigger.isRefreshing){let e=_maxScroll(r)*A;e<-R&&H(e),_onResizeDelayedCall.restart(!0)}})),V=e=>{r.scrollTop=0,e.target.contains&&e.target.contains(r)||T&&!1===T(this,e)||(ScrollTrigger.isInViewport(e.target)||e.target===u||this.scrollTo(e.target,!1,"center center"),u=e.target)},L=(e,t)=>{if(e<t.start)return e;let r=isNaN(t.ratio)?1:t.ratio,o=t.end-t.start,s=e-t.start,i=t.offset||0,l=t.pins||[],n=l.offset||0,a=t._startClamp&&t.start<=0||t.pins&&t.pins.offset?0:t._endClamp&&t.end===_maxScroll()?1:.5;return l.forEach((t=>{o-=t.distance,t.nativeStart<=e&&(s-=t.distance)})),n&&(s*=(o-n/r)/o),e+(s-i*a)/r-s},U=(e,t,r)=>{r||(e.pins.length=e.pins.offset=0);let o,s,i,l,n,a,c,g,d=e.pins,p=e.markers;for(c=0;c<t.length;c++)if(g=t[c],e.trigger&&g.trigger&&e!==g&&(g.trigger===e.trigger||g.pinnedContainer===e.trigger||e.trigger.contains(g.trigger))&&(n=g._startNative||g._startClamp||g.start,a=g._endNative||g._endClamp||g.end,i=L(n,e),l=g.pin&&a>0?i+(a-n):L(a,e),g.setPositions(i,l,!0,(g._startClamp?Math.max(0,i):i)-n),g.markerStart&&p.push(gsap.quickSetter([g.markerStart,g.markerEnd],"y","px")),g.pin&&g.end>0&&!r)){if(o=g.end-g.start,s=e._startClamp&&g.start<0,s){if(e.start>0)return e.setPositions(0,e.end+(e._startNative-e.start),!0),void U(e,t);o+=g.start,d.offset=-g.start}d.push({start:g.start,nativeStart:n,end:g.end,distance:o,trig:g}),e.setPositions(e.start,e.end+(s?-g.start:o),!0)}},q=(e,t)=>{i.forEach((r=>U(r,e,t)))},G=()=>{F(),requestAnimationFrame(F),i&&(ScrollTrigger.getAll().forEach((e=>{e._startNative=e.start,e._endNative=e.end})),i.forEach((e=>{let t=e._startClamp||e.start,r=e.autoSpeed?Math.min(_maxScroll(),e.end):t+Math.abs((e.end-t)/e.ratio),o=r-e.end;if(t-=o/2,r-=o/2,t>r){let e=t;t=r,r=e}e._startClamp&&t<0?(r=e.ratio<0?_maxScroll():e.end/e.ratio,o=r-e.end,t=0):(e.ratio<0||e._endClamp&&r>=_maxScroll())&&(r=_maxScroll(),t=e.ratio<0||e.ratio>1?0:r-(r-e.start)/e.ratio,o=(r-t)*e.ratio-(e.end-e.start)),e.offset=o||1e-4,e.pins.length=e.pins.offset=0,e.setPositions(t,r,!0)})),q(ScrollTrigger.sort())),z.reset()},Y=()=>ScrollTrigger.addEventListener("refresh",G),K=()=>i&&i.forEach((e=>e.vars.onRefresh(e))),W=()=>(i&&i.forEach((e=>e.vars.onRefreshInit(e))),K),j=(e,t,r,o)=>()=>{let s="function"==typeof t?t(r,o):t;s||0===s||(s=o.getAttribute("data-"+E+e)||("speed"===e?1:0)),o.setAttribute("data-"+E+e,s);let i="clamp("===(s+"").substr(0,6);return{clamp:i,value:i?s.substr(6,s.length-7):s}},J=(e,t,o,s,l)=>{l=("function"==typeof l?l(s,e):l)||0;let n,a,c,g,d,p,h=j("speed",t,s,e),f=j("lag",o,s,e),_=gsap.getProperty(e,"y"),u=e._gsap,m=[],S=()=>{t=h(),o=parseFloat(f().value),n=parseFloat(t.value)||1,c="auto"===t.value,d=c||a&&a._startClamp&&a.start<=0||m.offset?0:a&&a._endClamp&&a.end===_maxScroll()?1:.5,g&&g.kill(),g=o&&gsap.to(e,{ease:_expo,overwrite:!1,y:"+=0",duration:o}),a&&(a.ratio=n,a.autoSpeed=c)},y=()=>{u.y=_+"px",u.renderTransform(1),S()},v=[],T=0,w=t=>{if(c){y();let r=_autoDistance(e,_clamp(0,1,-t.start/(t.end-t.start)));T=r.change,p=r.offset}else p=m.offset||0,T=(t.end-t.start-p)*(1-n);m.forEach((e=>T-=e.distance*(1-n))),t.offset=T||.001,t.vars.onUpdate(t),g&&g.progress(1)};return S(),(1!==n||c||g)&&(a=ScrollTrigger.create({trigger:c?e.parentNode:e,start:()=>t.clamp?"clamp(top bottom+="+l+")":"top bottom+="+l,end:()=>t.value<0?"max":t.clamp?"clamp(bottom top-="+l+")":"bottom top-="+l,scroller:r,scrub:!0,refreshPriority:-999,onRefreshInit:y,onRefresh:w,onKill:e=>{let t=i.indexOf(e);t>=0&&i.splice(t,1),y()},onUpdate:e=>{let t,r,o,s=_+T*(e.progress-d),i=m.length,l=0;if(e.offset){if(i){for(r=-R,o=e.end;i--;){if(t=m[i],t.trig.isActive||r>=t.start&&r<=t.end)return void(g&&(t.trig.progress+=t.trig.direction<0?.001:-.001,t.trig.update(0,0,1),g.resetTo("y",parseFloat(u.y),-I,!0),k&&g.progress(1)));r>t.end&&(l+=t.distance),o-=t.distance}s=_+l+T*((gsap.utils.clamp(e.start,e.end,r)-e.start-l)/(o-e.start)-d)}v.length&&!c&&v.forEach((e=>e(s-l))),s=_round(s+p),g?(g.resetTo("y",s,-I,!0),k&&g.progress(1)):(u.y=s+"px",u.renderTransform(1))}}}),w(a),gsap.core.getCache(a.trigger).stRevert=W,a.startY=_,a.pins=m,a.markers=v,a.ratio=n,a.autoSpeed=c,e.style.willChange="transform"),a};function Q(){return o=t.clientHeight,t.style.overflow="visible",_body.style.height=_win.innerHeight+(o-_win.innerHeight)/A+"px",o-_win.innerHeight}Y(),ScrollTrigger.addEventListener("killAll",Y),gsap.delayedCall(.5,(()=>k=0)),this.scrollTop=H,this.scrollTo=(e,t,r)=>{let o=gsap.utils.clamp(0,_maxScroll(),isNaN(e)?this.offset(e,r,!!t&&!g):+e);t?g?gsap.to(this,{duration:P,scrollTop:o,overwrite:"auto",ease:_expo}):C(o):H(o)},this.offset=(e,t,r)=>{let o,s=(e=_toArray(e)[0]).style.cssText,l=ScrollTrigger.create({trigger:e,start:t||"top top"});return i&&(k?ScrollTrigger.refresh():q([l],!0)),o=l.start/(r?A:1),l.kill(!1),e.style.cssText=s,gsap.core.getCache(e).uncache=1,o},this.content=function(e){if(arguments.length){let r=_toArray(e||"#smooth-content")[0]||console.warn("ScrollSmoother needs a valid content element.")||_body.children[0];return r!==t&&(t=r,c=t.getAttribute("style")||"",O&&O.observe(t),gsap.set(t,{overflow:"visible",width:"100%",boxSizing:"border-box",y:"+=0"}),P||gsap.set(t,{clearProps:"transform"})),this}return t},this.wrapper=function(e){return arguments.length?(r=_toArray(e||"#smooth-wrapper")[0]||_wrap(t),a=r.getAttribute("style")||"",Q(),gsap.set(r,P?{overflow:"hidden",position:"fixed",height:"100%",width:"100%",top:0,left:0,right:0,bottom:0}:{overflow:"visible",position:"relative",width:"100%",height:"auto",top:"auto",bottom:"auto",left:"auto",right:"auto"}),this):r},this.effects=(e,t)=>{if(i||(i=[]),!e)return i.slice(0);(e=_toArray(e)).forEach((e=>{let t=i.length;for(;t--;)i[t].trigger===e&&i[t].kill()})),t=t||{};let r,o,{speed:s,lag:l,effectsPadding:n}=t,a=[];for(r=0;r<e.length;r++)o=J(e[r],s,l,r,n),o&&a.push(o);return i.push(...a),!1!==t.refresh&&ScrollTrigger.refresh(),a},this.sections=(e,t)=>{if(l||(l=[]),!e)return l.slice(0);let r=_toArray(e).map((e=>ScrollTrigger.create({trigger:e,start:"top 120%",end:"bottom -20%",onToggle:t=>{e.style.opacity=t.isActive?"1":"0",e.style.pointerEvents=t.isActive?"all":"none"}})));return t&&t.add?l.push(...r):l=r.slice(0),r},this.content(e.content),this.wrapper(e.wrapper),this.render=e=>D(e||0===e?e:R),this.getVelocity=()=>z.getVelocity(-R),ScrollTrigger.scrollerProxy(r,{scrollTop:H,scrollHeight:()=>Q()&&_body.scrollHeight,fixedMarkers:!1!==e.fixedMarkers&&!!P,content:t,getBoundingClientRect:()=>({top:0,left:0,width:_win.innerWidth,height:_win.innerHeight})}),ScrollTrigger.defaults({scroller:r});let X=ScrollTrigger.getAll().filter((e=>e.scroller===_win||e.scroller===r));X.forEach((e=>e.revert(!0,!0))),s=ScrollTrigger.create({animation:gsap.fromTo(M,{y:()=>(f=0,0)},{y:()=>(f=1,-Q()),immediateRender:!1,ease:"none",data:"ScrollSmoother",duration:100,onUpdate:function(){if(f){let e=_;e&&(B(s),M.y=R),D(M.y,e),N(),S&&!g&&S(x)}}}),onRefreshInit:e=>{if(ScrollSmoother.isRefreshing)return;if(ScrollSmoother.isRefreshing=!0,i){let e=ScrollTrigger.getAll().filter((e=>!!e.pin));i.forEach((t=>{t.vars.pinnedContainer||e.forEach((e=>{if(e.pin.contains(t.trigger)){let r=t.vars;r.pinnedContainer=e.pin,t.vars=null,t.init(r,t.animation)}}))}))}let t=e.getTween();h=t&&t._end>t._dp._time,p=R,M.y=0,P&&(1===ScrollTrigger.isTouch&&(r.style.position="absolute"),r.scrollTop=0,1===ScrollTrigger.isTouch&&(r.style.position="fixed"))},onRefresh:e=>{e.animation.invalidate(),e.setPositions(e.start,Q()/A),h||B(e),M.y=-C()*A,D(M.y),k||(h&&(_=!1),e.animation.progress(gsap.utils.clamp(0,1,p/A/-e.end))),h&&(e.progress-=.001,e.update()),ScrollSmoother.isRefreshing=!1},id:"ScrollSmoother",scroller:_win,invalidateOnRefresh:!0,start:0,refreshPriority:-9999,end:()=>Q()/A,onScrubComplete:()=>{z.reset(),y&&y(this)},scrub:P||!0}),this.smooth=function(t){return arguments.length&&(P=t||0,A=P&&+e.speed||1,s.scrubDuration(t)),s.getTween()?s.getTween().duration():0},s.getTween()&&(s.getTween().vars.ease=e.ease||_expo),this.scrollTrigger=s,e.effects&&this.effects(!0===e.effects?"[data-"+E+"speed], [data-"+E+"lag]":e.effects,{effectsPadding:e.effectsPadding,refresh:!1}),e.sections&&this.sections(!0===e.sections?"[data-section]":e.sections),X.forEach((e=>{e.vars.scroller=r,e.revert(!1,!0),e.init(e.vars,e.animation)})),this.paused=function(e,t){return arguments.length?(!!g!==e&&(e?(s.getTween()&&s.getTween().pause(),C(-R/A),z.reset(),d=ScrollTrigger.normalizeScroll(),d&&d.disable(),g=ScrollTrigger.observe({preventDefault:!0,type:"wheel,touch,scroll",debounce:!1,allowClicks:!0,onChangeY:()=>H(-R)}),g.nested=_inputObserver(_docEl,"wheel,touch,scroll",!0,!1!==t)):(g.nested.kill(),g.kill(),g=0,d&&d.enable(),s.progress=(-R/A-s.start)/(s.end-s.start),B(s))),this):!!g},this.kill=this.revert=()=>{this.paused(!1),B(s),s.kill();let e=(i||[]).concat(l||[]),o=e.length;for(;o--;)e[o].kill();ScrollTrigger.scrollerProxy(r),ScrollTrigger.removeEventListener("killAll",Y),ScrollTrigger.removeEventListener("refresh",G),r.style.cssText=a,t.style.cssText=c;let g=ScrollTrigger.defaults({});g&&g.scroller===r&&ScrollTrigger.defaults({scroller:_win}),this.normalizer&&ScrollTrigger.normalizeScroll(!1),clearInterval(n),_mainInstance=null,O&&O.disconnect(),_body.style.removeProperty("height"),_win.removeEventListener("focusin",V)},this.refresh=(e,t)=>s.refresh(e,t),w&&(this.normalizer=ScrollTrigger.normalizeScroll(!0===w?{debounce:!0,content:!P&&t}:w)),ScrollTrigger.config(e),"overscrollBehavior"in _win.getComputedStyle(_body)&&gsap.set([_body,_docEl],{overscrollBehavior:"none"}),"scrollBehavior"in _win.getComputedStyle(_body)&&gsap.set([_body,_docEl],{scrollBehavior:"auto"}),_win.addEventListener("focusin",V),n=setInterval(N,250),"loading"===_doc.readyState||requestAnimationFrame((()=>ScrollTrigger.refresh()))}get progress(){return this.scrollTrigger?this.scrollTrigger.animation._time/100:0}static register(e){return _coreInitted||(gsap=e||_getGSAP(),_windowExists()&&window.document&&(_win=window,_doc=document,_docEl=_doc.documentElement,_body=_doc.body),gsap&&(_toArray=gsap.utils.toArray,_clamp=gsap.utils.clamp,_expo=gsap.parseEase("expo"),_context=gsap.core.context||function(){},ScrollTrigger=gsap.core.globals().ScrollTrigger,gsap.core.globals("ScrollSmoother",ScrollSmoother),_body&&ScrollTrigger&&(_onResizeDelayedCall=gsap.delayedCall(.2,(()=>ScrollTrigger.isRefreshing||_mainInstance&&_mainInstance.refresh())).pause(),_root=[_win,_doc,_docEl,_body],_getVelocityProp=ScrollTrigger.core._getVelocityProp,_inputObserver=ScrollTrigger.core._inputObserver,ScrollSmoother.refresh=ScrollTrigger.refresh,_coreInitted=1))),_coreInitted}}ScrollSmoother.version="3.12.5",ScrollSmoother.create=e=>_mainInstance&&e&&_mainInstance.content()===_toArray(e.content)[0]?_mainInstance:new ScrollSmoother(e),ScrollSmoother.get=()=>_mainInstance,_getGSAP()&&gsap.registerPlugin(ScrollSmoother);export{ScrollSmoother as default};